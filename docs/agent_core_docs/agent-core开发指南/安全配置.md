# 安全说明

openJiuwen拥有集成外部系统的能力：可与大语言模型服务、三方插件服务实现联动，使能开发者搭建兼具智能性与实用性的智能体应用——既能充分发挥大语言模型的核心优势，又能无缝与外部资源交互。

## 安全风险描述

- **安全传输与认证**：openJiuwen框架与外部服务（`http`开头）间的通信缺乏身份认证和安全通道，存在中间人攻击、信息泄露、提权等风险。

- **服务器端请求伪造**：开发者集成openJiuwen框架的应用服务，可能会被攻击者利用，诱导服务器向指定地址发送未授权请求，窃取内部资源或攻击内网漏洞。

- **自定义组件的非安全实现**：openJiuwen框架支持实现开发者自定义组件，在组件的开发实现中，由于开发者的不安全操作可能引入安全风险。


## 最佳实践

- **SSL校验**：调用大模型服务和三方插件服务时，建议开启SSL校验以保障通信安全。此时需分别为`LLM_SSL_CERT`和`RESTFUL_SSL_CERT`配置本地证书路径；对于提供`HTTPS`接口的外部服务，如果未配置证书路径，框架将抛出异常提示用户必须配置本地证书路径。除非本地自验证场景，否则不建议关闭SSL校验或调用`http`开头的外部服务。

- **SSRF防护**：调用大模型服务和三方插件服务时，建议开启SSRF防护，框架会禁止访问本地IP、内网地址（如`10.0.0.0`-`10.255.255.255`等范围），防范服务器端请求伪造攻击。仅本地测试需访问敏感地址时，可将`SSRF_PROTECT_ENABLED`设为`false`。但生产环境必须启用，避免攻击者诱导服务器发送未授权请求、窃取资源或攻击内网。

- **自定义组件**：开发者在实现自定义组件时遵循良好的安全设计原则：按应用实际需求管控访问权限，比如采用只读权限的访问凭证；开发者应假设系统访问权限或相关凭证可能被滥用，构建多层级安全防护体系，而非依赖某一种单一的防御措施。
